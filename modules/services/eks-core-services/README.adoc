:type: service
:name: Amazon EKS Core Services
:description: Deploy core administrative applications on top of Amazon EC2 Kubernetes Service (EKS)
:icon: /_docs/eks-icon.png
:category: docker-orchestration
:cloud: aws
:tags: docker, orchestration, kubernetes, containers
:license: gruntwork
:built-with: terraform, helm

// AsciiDoc TOC settings
:toc:
:toc-placement!:
:toc-title:

// GitHub specific settings. See https://gist.github.com/dcode/0cfbf2699a1fe9b46ff04c41721dda74 for details.
ifdef::env-github[]
:tip-caption: :bulb:
:note-caption: :information_source:
:important-caption: :heavy_exclamation_mark:
:caution-caption: :fire:
:warning-caption: :warning:
endif::[]

= Amazon EKS Core Services

image:https://img.shields.io/badge/maintained%20by-gruntwork.io-%235849a6.svg[link="https://gruntwork.io/?ref=repo_aws_service_catalog"]
image:https://img.shields.io/badge/tf-%3E%3D0.12.0-blue.svg[Terraform version]
image:https://img.shields.io/badge/helm-%3E%3D3.1.0-green[Helm version]
image:https://img.shields.io/badge/k8s-1.13%20~%201.15-5dbcd2[K8s version]

This folder contains https://www.terraform.io[Terraform] and https://helm.sh/[Helm] code to deploy core administrative
services onto https://docs.aws.amazon.com/eks/latest/userguide/clusters.html[Elastic Kubernetes Service (EKS)].

image::/_docs/eks-core-services-architecture.png?raw=true[EKS Core Services architecture]

toc::[]




== Features

* Deploy FluentD DaemonSet to ship container logs to CloudWatch Logs
* Deploy ALB Ingress Controller to configure ALBs from within Kubernetes
* Deploy external-dns to manage Route 53 DNS records from within Kubernetes
* Deploy Kubernetes cluster-autoscaler to configure auto scaling of ASGs based on Pod demand




== Learn

NOTE: This repo is a part of the https://gruntwork.io/service-catalog/[Gruntwork Service Catalog], a collection of
reusable, battle-tested, production ready infrastructure code. If you've never used the Service Catalog before, make
sure to read https://gruntwork.io/guides/foundations/how-to-use-gruntwork-service-catallog/[How to use the Gruntwork
Service Catalog]!

Under the hood, this is all implemented using Terraform modules from the Gruntwork
https://github.com/gruntwork-io/module-vpc[module-vpc] repo. If you don't have access to this repo, email
support@gruntwork.io.


=== Core concepts

For information on each of the core services deployed by this module, see the documenttion in the
https://github.com/gruntwork-io/terraform-aws-eks[terraform-aws-eks] repo.

* https://github.com/gruntwork-io/terraform-aws-eks/tree/master/modules/eks-cloudwatch-container-logs[FluentD DaemonSet]
* https://github.com/gruntwork-io/terraform-aws-eks/blob/master/modules/eks-alb-ingress-controller[ALB Ingress Controller]
* https://github.com/gruntwork-io/terraform-aws-eks/tree/master/modules/eks-k8s-external-dns[external-dns]
* https://github.com/gruntwork-io/terraform-aws-eks/tree/master/modules/eks-k8s-cluster-autoscaler[cluster-autoscaler]


=== Repo organization

* link:/modules[modules]: the main implementation code for this repo, broken down into multiple standalone, orthogonal submodules.
* link:/examples[examples]: This folder contains working examples of how to use the submodules.
* link:/test[test]: Automated tests for the modules and examples.


== Deploy

=== Non-production deployment (quick start for learning)

If you just want to try this repo out for experimenting and learning, check out the following resources:

* link:/examples/for-learning-and-testing[examples/for-learning-and-testing folder]: The
  `examples/for-learning-and-testing` folder contains standalone sample code optimized for learning, experimenting, and
  testing (but not direct production usage).

=== Production deployment

If you want to deploy this repo in production, check out the following resources:

* link:/examples/for-production[examples/for-production folder]: The `examples/for-production` folder contains sample
  code optimized for direct usage in production. This is code from the
  https://gruntwork.io/reference-architecture/:[Gruntwork Reference Architecture], and it shows you how we build an
  end-to-end, integrated tech stack on top of the Gruntwork Service Catalog.
* https://gruntwork.io/guides/kubernetes/how-to-deploy-production-grade-kubernetes-cluster-aws/#deployment_walkthrough[How to deploy a production-grade Kubernetes cluster on AWS]: A step-by-step guide for deploying a production-grade EKS cluster on AWS using the code in this repo.




== Manage

* https://github.com/gruntwork-io/terraform-aws-eks/tree/master/modules/eks-alb-ingress-controller#using-the-ingress-controller[How
  do you use the ingress controller to translate Ingress resources into ALBs?]
* link:core-concepts.md#how-do-i-hook-up-the-cluster-autoscaler-to-my-workers[How do I hook up the cluster autoscaler to
  my workers?]
* link:core-concepts.md#how-do-i-restrict-which-hosted-zones-the-app-should-manage[How do I restrict which Hosted Zones
  the app should manage?]


== Contributions

Contributions to this repo are very welcome and appreciated! If you find a bug or want to add a new feature or even contribute an entirely new module, we are very happy to accept pull requests, provide feedback, and run your changes through our automated test suite.

Please see https://gruntwork.io/guides/foundations/how-to-use-gruntwork-infrastructure-as-code-library/#contributing-to-the-gruntwork-infrastructure-as-code-library[Contributing to the Gruntwork Infrastructure as Code Library] for instructions.




== License

Please see link:/LICENSE.txt[LICENSE.txt] for details on how the code in this repo is licensed.
